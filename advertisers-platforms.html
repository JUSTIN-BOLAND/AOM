---
layout: docs
title: Piwik AOM Plugin Documentation - Advertiser's Platforms
---

<h2 class="title text-center">Tracking params, importing and merging</h2>
<p>Here you'll find all the information about how to set up the tracking params that enable the plugin to assign
    imported platform data to individual visits.</p>

<p>Make sure that you have understood and followed the <a href="docs.html">introduction</a> before adding params.</p>

<h2 class="sub-title text-center">Google AdWords</h2>

<h3>Tracking params</h3>

<p>Since July 2017 the only supported way for Google AdWords is to use
    <a href="https://support.google.com/analytics/answer/1733663">auto-tagging</a>, which
    automatically adds a parameter named <code>gclid</code> to all links coming from AdWords. With the help of AdWords'
    <a href="https://developers.google.com/adwords/api/docs/appendix/reports/click-performance-report">click performance
    report</a> we can identify campaign, ad group etc. for every single AdWords click afterwards.</p>

<p>When a Google AdWords ad for which you enabled auto-tagging is clicked, data like the following can be found in
    <code>log_visit.aom_ad_params</code>:</p>
<div class="code-block">
    <pre><code class="language-php">{
    "platform":"AdWords",
    "gclid":"CICO-Krt9c4CFSQz0wodCNUH8Q"
}</code></pre></div>


<!-- Google AdWords: Importing & merging -->
<h3>Importing &amp; merging</h3>

<p>For importing and merging you must activate AdWords and provide API credentials within this plugin's settings. This
    requires a <a href="https://code.google.com/apis/console#access">web application in the Google API console</a> with
    Piwik's full URI (e.g.
    <a href="http://local.piwik.de?module=AOM&amp;action=platformAction&amp;platform=AdWords&amp;method=processOAuthRedirect">http://local.piwik.de?module=AOM&amp;action=platformAction&amp;platform=AdWords&amp;method=processOAuthRedirect</a>)
    being an authorized redirect URI.</p>

<p>AdWords data is being (re)imported for the last 3 days (as old data might change). At first a
    <a href="https://developers.google.com/adwords/api/docs/appendix/reports/click-performance-report">click performance
    report</a> will be fetched to identify campaign, ad group etc. for every single AdWords click (gclid). Afterwards,
    the usual merge process is going to happen.</p>


<!-- Microsoft Bing Ads -->
<h2 class="sub-title text-center">Microsoft Bing Ads</h2>

<h3>Tracking params</h3>

<p>We use <a href="http://help.bingads.microsoft.com/apex/index/3/en-us/51091">URL tracking</a> to obtain the required
    data. The following params are supported:</p>

<table><thead>
<tr>
    <th>Param</th>
    <th>Mandatory</th>
    <th>Contents</th>
</tr>
</thead><tbody>
<tr>
    <td>{prefix}_platform</td>
    <td>true</td>
    <td>Bing</td>
</tr>
<tr>
    <td>{prefix}_campaign_id</td>
    <td>true</td>
    <td>{CampaignId}</td>
</tr>
<tr>
    <td>{prefix}_ad_group_id</td>
    <td>true</td>
    <td>{AdGroupId}</td>
</tr>
<tr>
    <td>{prefix}_target_id</td>
    <td>true</td>
    <td>{TargetId}</td>
</tr>
</tbody></table>

<p>A typical link at Microsoft Bing Ads (with the prefix "aom") should have the following params:</p>
<pre><code>&amp;aom_platform=Bing&amp;aom_campaign_id={CampaignId}&amp;aom_ad_group_id={AdGroupId}&amp;aom_target_id={TargetId}</code></pre>

<p>When a Bing ad is clicked, data like the following can be found in <code>log_visit.aom_ad_params</code>:</p>
<div class="code-block">
    <pre><code class="language-php">{
    "platform":"Bing",
    "campaignId":190561279,
    "adGroupId":2029114499,
    "targetId":"40414589411"
}</code></pre></div>


<!-- Bing Ads: Importing & merging -->
<h3>Importing &amp; merging</h3>

<p>For importing and merging you must activate Bing and provide API credentials within this plugin's settings. This
    requires a <a href="https://account.live.com/developers/applications">mobile or desktop client app</a> at Bing.
    Piwik's URI (e.g. <a href="http://local.piwik.de/">http://local.piwik.de/</a>) must be added at Bing to the app's
    valid redirect URLs under "API settings". </p>

<p>Bing's data is being imported once a day. </p>


<!-- Criteo -->
<h2 class="sub-title text-center">Criteo</h2>

<h3>Tracking params</h3>

<p>When using Criteo, all links must be created manually.
    The following params must be replaced manually with their corresponding IDs:</p>

<table><thead>
<tr>
    <th>Param</th>
    <th>Mandatory</th>
    <th>Contents</th>
</tr>
</thead><tbody>
<tr>
    <td>{prefix}_platform</td>
    <td>true</td>
    <td>Criteo</td>
</tr>
<tr>
    <td>{prefix}_campaign_id</td>
    <td>true</td>
    <td>14340</td>
</tr>
</tbody></table>

<p>A typical link at Criteo (with the prefix "aom") should have the following params:</p>
<pre><code>&amp;aom_platform=Criteo&amp;aom_campaign_id=14340</code></pre>

<p>When a Criteo ad is clicked, data like the following can be found in
    <code>log_visit.aom_ad_params</code>:</p>
<div class="code-block">
    <pre><code class="language-php">{
    "platform":"Criteo",
    "campaignId":"14340"
}</code></pre></div>

<!-- Criteo: Importing & merging -->
<h4>Importing &amp; merging</h4>

<p>Criteo's data is being imported once a day.</p>

<p>Merging is solely based on Criteo's campaign ID.</p>


<!-- Facebook Ads -->
<h2 class="sub-title text-center">Facebook Ads</h2>

<strong>Attention: The implementation of Facebook Ads is deprecated and does not work at the moment.</strong>

<h3>Tracking params</h3>

<p>When using Facebook Ads, all links must be created manually.
    The following params must be replaced manually with their corresponding IDs:</p>

<table><thead>
<tr>
    <th>Param</th>
    <th>Mandatory</th>
    <th>Contents</th>
</tr>
</thead><tbody>
<tr>
    <td>{prefix}_platform</td>
    <td>true</td>
    <td>FacebookAds</td>
</tr>
<tr>
    <td>{prefix}_campaign_id</td>
    <td>true</td>
    <td>4160286035775</td>
</tr>
<tr>
    <td>{prefix}_adset_id</td>
    <td>true</td>
    <td>6028603577541</td>
</tr>
<tr>
    <td>{prefix}_ad_id</td>
    <td>true</td>
    <td>5760286037541</td>
</tr>
</tbody></table>

<p>A typical link at FacebookAds (with the prefix "aom") should have the following params:</p>
<pre><code>&amp;aom_platform=FacebookAds&amp;aom_campaign_id=4160286035775&amp;aom_adset_id=6028603577541&amp;aom_ad_id=5760286037541</code></pre>

<p>When a Facebook Ads ad is clicked, data like the following can be found in
    <code>log_visit.aom_ad_params</code>:</p>
<div class="code-block">
    <pre><code class="language-php">{
    "platform":"FacebookAds",
    "campaignId":"4160286035775",
    "adsetId":"6028603577541",
    "adId":"5760286037541"
}</code></pre></div>


<!-- Facebook Ads: Importing & merging -->
<h3>Importing &amp; merging</h3>

<p>For importing and merging you must activate Facebook Ads and provide API credentials within this plugin's settings.
    This requires a <a href="https://developers.facebook.com/docs/marketing-api/quickstart">Facebook App with Marketing
    API access</a>. Piwik's URI (e.g. <a href="http://local.piwik.de/">http://local.piwik.de/</a>) must be added to the
    app's valid OAuth redirect URIs.</p>

<p>Facebook Ads' data is being imported once a day.</p>


<!-- Taboola -->
<h2 class="sub-title text-center">Taboola</h2>

<h3>Tracking params</h3>

<p>We use <a href="https://www.taboola.com/advertiser-help-center/tracking">Taboola's passback macros</a>, which are
    dynamic tracking parameters that can be set on campaign level. The following params are supported:</p>

<table><thead>
<tr>
    <th>Param</th>
    <th>Mandatory</th>
    <th>Contents</th>
</tr>
</thead><tbody>
<tr>
    <td>{prefix}_platform</td>
    <td>true</td>
    <td>Taboola</td>
</tr>
<tr>
    <td>{prefix}_campaign_id</td>
    <td>true</td>
    <td>{campaign_id}</td>
</tr>
<tr>
    <td>{prefix}_site_id</td>
    <td>true</td>
    <td>{site}</td>
</tr>
<tr>
    <td>{prefix}_campaign_item_id</td>
    <td>false</td>
    <td>{campaign_item_id}</td>
</tr>
<tr>
    <td>{prefix}_device</td>
    <td>false</td>
    <td>{platform}</td>
</tr>
</tbody></table>

<p>A typical link at Taboola (with the prefix "aom") should have the following params:</p>
<pre><code>&amp;aom_platform=Taboola&amp;aom_campaign_id={campaign_id}&amp;aom_site_id={site}&amp;aom_campaign_item_id={campaign_item_id}&amp;aom_device={platform}</code></pre>

<p>When a Taboola ad is clicked, data like the following can be found in <code>log_visit.aom_ad_params</code>:</p>
<div class="code-block">
    <pre><code class="language-php">{
    "platform":"Taboola",
    "campaignId":504470,
    "siteId":"msn-germany-home"
}</code></pre></div>


<!-- Taboola: Importing & merging -->
<h3>Importing &amp; merging</h3>

<p>For importing and merging you must activate Taboola and provide API credentials within this plugin's settings.</p>

<p>Taboola's data is being imported every few hours.</p>


<!-- Individual campaigns -->
<h2 class="sub-title text-center">Individual campaigns</h2>

<p>For some campaigns, such as email marketing partnerships or CPA deals, there might not be an advertising platform
    with an API, where you can fetch the additional data (like campaign names and cost) from. Therefore Piwik AOM allows
    you to provide this data and Piwik AOM distributes the costs to the visits that resulted from the campaign (even if
    there were no visits the costs are still being considered). Here are some examples:</p>

<h4>Email marketing campaign</h4>

<p>Imagine you've created an email marketing campaign ...
    <strong>This feature is work in progress and will be released soon.</strong></p>

<p>You cannot distribute costs to visits that have been detected by Piwik AOM, i.e. you cannot distribute (additional)
    cost for example to an AdWords campaign that already got additional data from AdWords. Piwik AOM takes care of that,
    but <strong>you need to make sure that your specifications don't overlap</strong>, e.g. that you distribute the cost
    of two email marketing campaigns to the same pool of visits.</p>


<!-- Individual campaigns: Offline campaigns -->
<h3>What about offline campaigns such as TV advertising, radio spots or offline magazines?</h3>

<p>The problem with offline campaigns like TV advertising is that you can neither detect from the HTTP referrer nor
    from the params that the visitor came from a specific TV spot. He might have also read about your brand in an
    offline magazine or got a recommendation from a friend. Nonetheless, there are ways to track TV advertising and the
    similar - but this is a topic on our future roadmap!</p>


<!-- Other advertising platforms and Piwik's default tracking params -->
<h2 class="sub-title text-center">Other advertising platforms and Piwik's default tracking params</h2>

<p>You should not use any of the params listed above when the advertising platform you are using is not listed here.</p>

<p>Piwik's <a href="http://piwik.org/docs/tracking-campaigns/">default tracking params</a> <code>pk_campaign</code> and
    <code>pk_kwd</code> (or the tracking params provided by the
    <a href="https://plugins.piwik.org/MarketingCampaignsReporting">Marketing Campaigns Reporting plugin</a>) should
    be used for both supported and unsupported advertising platforms.</p>
