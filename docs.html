---
layout: docs
title: Piwik AOM Plugin Documentation
---

<h2 class="title text-center">Piwik AOM Plugin Documentation</h2>
<p>Integrate additional data like campaign names, ad impressions costs etc. from advertising platforms such as
    Google AdWords, Microsoft Bing, Criteo and Facebook Ads into Piwik and combine that data with individual visits -
    <strong>create a whole bunch of new opportunities!</strong></p>

<!-- Advertiser's platforms -->
<div class="block">
    <h2 class="sub-title text-center">Importing and merging advertiser's platforms' data</h2>
    <p>To obtain data (campaign names, costs, ad impressions, etc.) from the advertising platforms, API access must be
        granted and configured within the settings of this plugin.</p>

<p>To map individual visits with the data from the advertising platforms, all links from the platforms must have
    <a href="advertisers-platforms.html">additional params</a> that supply mapping-related data like campaign and ad IDs
    to this plugin. This data is stored in <code>piwik_log_visit.aom_ad_params</code>. When a visitor returns with other
    tracking params, a new visit is started automatically.</p>

<p>Background jobs import and merge the data from the advertising platforms with individual visits. Importing and
    merging is done automatically when you have set up
    <a href="http://piwik.org/docs/setup-auto-archiving/">auto archiving</a>.<p>

<p>You can (re)import data manually by executing <code>./console aom:import --platform={platformName}
    --startDate=YYYY-MM-DD --endDate=YYYY-MM-DD</code>.</p>

<p>You can merge imported data manually by executing <code>./console aom:merge --platform={platformName}
    --startDate=YYYY-MM-DD --endDate=YYYY-MM-DD</code>.</p>

<p>Imported data is stored in <code>piwik_aom_{platformName}</code>. Every advertising platform's data is aggregated on
    a daily basis in the timezone of the advertising platform's account. Merging will only be correct, when your
    website's timezone matches the timezones of each advertising platform account. Merged data is stored in
    <code>piwik_log_visit.aom_ad_data</code>.</p>


<!-- Allocate costs to Piwik visits -->
<h2 class="sub-title text-center">Allocate costs to Piwik visits</h2>
<p>Executing <code>./console aom:replenish-visits --startDate=YYYY-MM-DD --endDate=YYYY-MM-DD</code> allocates platform
    costs to (merged) Piwik visits and stores the results in <code>piwik_aom_visits</code>. There might be more visits
    in <code>piwik_aom_visits</code> then in <code>piwik_log_visits</code> when there a platform costs that could not be
    assigned to visits from <code>piwik_log_visits</code>.</p>

<p>The data in <code>piwik_aom_visits</code> contains both all Piwik visits and all costs. It can be used via the
    <a href="api.html">API endpoints provided by the Piwik AOM plugin</a> (e.g. for further processing in a data
    warehouse).</p>


<!-- Requirements, installation & updates -->
<h2 class="sub-title text-center">Requirements, installation &amp; updates</h2>

<p>MySQL 5.0.3 or higher is required as we store more than 255 characters in VARCHAR. You must be able to run cron jobs
    to set up <a href="http://piwik.org/docs/setup-auto-archiving/">auto archiving</a>.</p>

<p>To install AOM, <a href="https://github.com/advanced-online-marketing/AOM/releases">grab the latest release from
    github</a> and upload it to <code>/path/to/piwik/plugins</code>. Make sure
    <a href="https://getcomposer.org/">Composer</a> is installed and run <code>composer install</code> in
    <code>plugins/AOM</code> to install dependencies, such as the Facebook Ads and Google AdWords SDKs. Activate and
    configure the plugin (e.g. provide API credentials to advertiser's platforms).</p>

<p>Set up <a href="http://piwik.org/docs/setup-auto-archiving/">auto archiving</a> to automatically import and merge
    data from the advertiser's platforms. The auto archiving cron job executes the <code>core:archive command</code>
    which triggers <a href="https://developer.piwik.org/api-reference/Piwik/TaskScheduler">Piwik's TaskScheduler</a> and
    thus this plugin's tasks. You can import and merge data manually by running <code>./console core:run-scheduled-tasks
    --force</code>.</p>

<p>Merging will only be correct, when your website's timezone matches the timezones of each advertising platform
    account.</p>

<p>Add the params that are required to assign imported data to individual visits to all links managed in the advertising
    platforms as described <a href="advertisers-platforms.html">here</a>.</p>


<!-- Limitations -->
<h2 class="sub-title text-center">Limitations</h2>

<h3>Advertising platforms</h3>
<p>All data is being processed on a daily basis, i.e. fluctuation of click costs during the day are not being
    considered.</p>

<h4>Google AdWords</h4>
<p>Visits of Google display network are assigned on AdGroup level.</p>

<h3>Performance</h3>
<p>This plugin has successfully been tested with up to 20k visitors a day for a period of more than a year, running on a
    AWS server ... with separate AWS RDS MySQL database .... You might encounter performance issues during importing,
    merging or using the plugin's API when you have more traffic or a an infrastructure with less performance.
</p>


<!-- Changelog -->
<h2 class="sub-title text-center">Changelog</h2>
<p><strong>0.2.0</strong> on 22 May 2016</p>
<ul>
    <li>Integrates Piwik AOM data into Piwik UI</li>
    <li>Fixes various bugs</li>
</ul>


<!-- License -->
<h2 class="sub-title text-center">License</h2>
<p>GPL v3 / fair use</p>


<!-- Support -->
<h2 class="sub-title text-center">Support</h2>
<p>Please report bugs and suggest features at
    <a href="https://github.com/advanced-online-marketing/AOM/issues">github</a>.</p>
<p>Leave comments or questions regarding this documentation below.</p>
<p>If you require intense consulting or like to sponsor the development of a specific features, get in touch!</p>
